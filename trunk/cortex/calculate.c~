#ifndef _CALCULATE
#define _CALCULATE
#include "instruction.h"
#include "stdio.h"
unsigned addwithcarry(unsigned m,unsigned n,unsigned carry_in){
	unsigned sum = m + n + carry_in;
//printf(" %x",sum);
	unsigned temp1 = (m & 0x7FFFFFFF) + (n & 0x7FFFFFFF) + carry_in;
//printf(" %x",temp1);
	temp1 = temp1 >> 31;
//printf(" %x",temp1);
	unsigned temp2 = m >> 31;
//printf(" %x",temp2);
	unsigned temp3 = n >> 31;
//printf(" %x",temp3);
	unsigned temp4 = temp1 + temp2 + temp3;
//printf(" %x",temp4);
	if(temp4 >= 2)
		set_calculate_carry();
	else
		cle_calculate_carry();
	unsigned temp5 = (temp1&&temp2&&(!temp3))||((!temp1)&&(!temp2)&&temp3);
	if(temp5)
		set_calculate_overflow();
	else
		cle_calculate_overflow();
	return sum;
}
#endif
